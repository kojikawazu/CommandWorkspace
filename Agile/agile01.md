# アジャイル開発

## アジャイルマニフェスト

- プロセスやツールよりも個人と対話を
- 包括的なドキュメントよりも動くソフトウェアを
- 契約交渉よりも顧客との協調を
- 計画に従うよりも変化への対応を価値とする

## アジャイルソフトウェアの12の原則

- 顧客満足を最優先し、価値のあるソフトウェアを早く継続的に提供します。
- 要求の変更はたとえ開発の後期であっても歓迎します。変化を味方につけることによって、お客様の競争力を引き上げます。
- 動くソフトウェアを、2-3週間から2-3ヵ月というできるだけ短い時間間隔でリリースします。
- ビジネス側の人と開発者は、プロジェクトを通して日々一緒に働かなければなりません。
- 意欲に満ちた人々を集めてプロジェクトを構成します。環境と支援を与え仕事が無事終わるまで彼らを信頼します。
- 情報を伝える最も効率的で効果的な方法はフェイス・トゥ・フェイスで話をすることです。
- 動くソフトウェアこそが進捗の最も重要な尺度です。
- アジャイル・プロセスは持続可能な開発を促進します。一定のペースを継続的に維持できるようにしなければなりません。
- 技術的卓越性と優れた設計に対する不断の注意が機敏さを高めます。
- シンプルさ(無駄なく作れる量を最大限にすること)が本質です。
- 最良のアーキテクチャ・要求・設計は、自己組織的なチームから生み出されます。
- チームがもっと効率を高めることができるかを定期的に振り返り、それに基づいて自分たちのやり方を最適に調整します。

## アジャイル開発の現在

- Agile is the new normal
  - HPの調査。企業の24%がハイブリット、67%がアジャイル開発(2017年)
- KPMG Global Agile Survey
  - 今後3年で企業レベルのアジャイル開発が2倍以上増えると予想(2019年)
- 15th State of Agile Report(2021年)
  - 86%がアジャイル開発を採用

## アジャイル開発がメインストリームとなった理由

- 変化の激しい時代になったから
- 技術が進化してきたから
- 開発が成熟し、プロダクトやビジネスにまでその思想が広がってきたから

## アジャイル開発の未来

- スクラムが世界的に主流
- アジャイル開発から、プロダクトマネジメント、アジャイルQAへと拡大
- アジャイルな組織のスケーリングが注目されつつある

## 従来型とアジャイル開発は共存できる？

- アジャイル開発組織に移行している場合は、部分的にアジャイルを取り入れ、段階的にアジャイルを導入する方法が取られる。これは、「ハイブリッド型」とも呼ばれる。
- 初期リリースは従来型。その後、アジャイル型で改善するケースもある。
- 自分たちの都合の良いように部分最適してはならない。

## プロジェクト運営の比較

### 従来型

- 管理でコントロール
  => 進捗どうですか？

- プロジェクトマネージャ
  => 全体を管理、PMBOK

- 役割毎の責務を果たす
  => 工程ごとにバトンを渡していく

### アジャイル開発

- 自律性を重視
  => ゴールを達成できるか？

- サーバント・リーダーシップ
  => チームを支える

- 職能横断型
  => チームでゴールを目指す

## プロジェクトマネージャは必要か？

- プロジェクト業務がある限りプロジェクトマネジメントは必要
- 自律したチームであればプロジェクトマネージャーは必須ではない
- 従来型のプロマネを推進するアジャイルチームはうまくいかない

## 組織・チームの比較

### 従来型

- 工程ごとの専任チーム
  => 要件定義 > 設計 > 開発 > テスト > 運用・・・

- 階層構造
  => 役割的な構造や組織的な構造

### アジャイル開発

- 熟達したチーム
  => チームメンバーを固定

- フラット型
  => 上下左右に俊敏に連携

## 要求・要件・仕様・タスクの比較

### 従来型

- ドキュメント重視
  => バトンパスのためにちゃんと書く

- WBS
  => リリース日から逆算してタスクまで分割

### アジャイル開発

- ユーザーストーリー
  => 誰にでもわかる言葉で要点を短く記述

- 優先順位形式
  => 優先順位順に一列に並んでいるだけ

## 見積もりと計画づくりの比較

### 従来型

- リリースから逆算
  => やることが決まっているので逆算して進捗管理しやすい

- スコープを調整
  => 人を増やすかスケジュールを伸ばすかスコープを減らす

### アジャイル開発

- 短いリリースを積み上げる
  => リリースによってプロダクトを積み上げていく

- タイムボックスに何を入れるか調整
  => 次でなくても次の次に出る

## 計画づくりの比較

### 従来型

スコープが固定
やりたいことや期限が重要

### アジャイル開発

短い時間とチーム人数が固定
変化への対応が重要

## 計画の柔軟性の比較

### 従来型

足し算 or 引き算する。スコープをできるだけ保持したいので、スコープを落としてスケスケにして調整するのが現実的。

### アジャイル開発

現実的な見積もりで、やる量や順番で調整する。

## プロジェクト期間の比較

### 従来型

- 中長期
  => 大きくつくって完成させる

### アジャイル開発

- 短期
  => 小さく作って改善で伸ばす

## 最適な期間はどれか？

短い期間
機能A → 機能B → 機能C → 機能D 

## 品質の比較

### 従来型

- 納品するまでに品質を高める
  => テストフェーズが重要。最後まで確認できない。

- プロセスや手順の正しさで品質を作りこむ
  => 仕様通り(予想通り)になれば品質が高い

- Velification(検証)重視
  => 答えがあるものを確認する作業に近い

### アジャイル開発

- リリース後も品質の改善を続ける
  => 継続的なテストが重要。継続して確認する

- 仮説とフィードバックで品質を作りこむ
  => 成果物で成果が出たら品質が高い

- Validation(妥当性)重視
  => 答えがないので仮説検証として妥当かを確認する

## 契約の比較

### 従来型

- 請負型が主流
  => 顧客が発注して開発側が全体の責任を持つ

- 大手企業やSI企業が主流
  => 顧客は開発組織を持たず、開発は専門組織が行う

### アジャイル開発

- スタートアップ、自社サービス企業だと契約がない
  => 自社開発だと契約が必要ない

- 外部に頼む場合は準委任型が主流
  => 成果の責任が持てないのでこうならざるを得ない

## 請負契約ではアジャイル開発できない？

- 完成を定義する請負と、未完成が続いていくアジャイル開発の相性は最悪
- よって、準委任が前提となる
- 請負でアジャイル開発に取り組むケースもあるが、むりくりアジャイル化してもアジャイル開発の恩恵がなかなか得られないので注意が必要

## 予算の比較

### 従来型

- 綿密な年間計画
  => 顧客に請求するためにも詳細が必要

### アジャイル開発

- 人件費がメイン
  => 人件費 x 人数 x 6ヵ月 + サーバ利用料(増加分)

- 予備予算で追加投資できる状態を作っておく
  => 急なアクセス増加などに対応

## アジャイル開発の誤解

Q. アジャイル開発はドキュメントを作らない
A. 必要最低限作ります。

アジャイルマニフェストにも「包括的なドキュメントよりも動くソフトウェアを」とあります。
よく作られるドキュメント：インセプションデッキ、システム全体図、複雑・重要な部分の仕様書、振り返りのログ

Q. アジャイル開発なら要件をいつでも変更できる？
A. 変更はいつでも大歓迎です。ただし、その結果遅延が発生する場合はあります。

変化に強いプロセスですが、要件がコロコロ変わると対応コストがかさんでしまうのは当然です。アジャイル開発ではスプリントと呼ばれる短い期間はスコープを固定し対応します。

Q. アジャイル開発は優秀な人にしかできない？
A. 誰でもできます

グーグルの研究結果はとても有名です。
"個人生産性の合計とチームの生産性は相対関係が少なく、チーム生産性の向上のためには「集団知性がいかに生まれるか」という視点が重要であることが分かった。書籍「だから僕たちは、組織を変えていける」より"

弱くてもアジャイルチーム
- リーダーがビジョンを持っている
- フォロワーがいる
- フィードバックを受け入れる

Q. アジャイル開発は残業しない？
A. 場合によってします。

いくらアジャイル開発が柔軟であっても、死守しなければならない期限は守らなければなりません。また、計画を決めたから変更しないという判断も柔軟性がありません。

大切なのは持続可能な開発です。

Q. アジャイル開発は計画を立てない？
A. 短期だけでなく中長期の計画も立てない

短い期間でリリースを繰り返す積み上げ型の開発のため、中長期な視点が見えにくい弱点があります。よって、チームは中長期的なリリース計画(ロードマップなど)を、スピードを落とさないレベルで作成し運用していきます。

Q. ユーザの価値、プロダクトの価値が重要？
A. 正しいですが、正しすぎると疲れます

意思決定の際に「プロダクト」が優先されるケースは多いでしょうが、ユーザもプロダクトもチームも個人も大切です。アジャイルマニフェストにも「アジャイル・プロセスは持続可能な開発を促進します」とあるように、個人やチームを犠牲にしてはなりません。

## アジャイル開発の用語

- チーム
  
自己組織化された職能横断型チーム

- スプリント・イテレーション(短い期間)
  
これを繰り返し、終了とともにリリースしている

- スクラムマスター

スクラムを推進する人

- ユーザーストーリー(やること)

やりたいこと。チケットなどで管理され、誰でも理解できる言語で書かれている。バックログアイテムと呼ばれる場合もある。

- バックログ(やることリスト)

優先順位付けされたユーザーストーリーのリスト。
プロダクトバックログからスプリントバックログを切り出して開発していく。

- ストーリーポイント

ユーザーストーリーを相対的にポイント形式で見積もる方法。
1スプリントで消化可能なストーリーポイントをベロシティ(やれる量)と呼ぶ。

## スクラム

- すごくシンプルなフレームワークで大人気
- ソフトウェア開発以外でも利用されている

## スクラムの理論

- 経験主義
  - 透明性 => 検査 => 適応
- リーン思考
  - 無駄を減らす

## スクラムの価値基準

- スクラムチームは、ゴールを達成し、お互いにサポートすることを確約する。
- スクラムチームは、ゴールに向けて可能な限り進捗できるように、スプリントの作業に集中する。
- スクラムチームとステークホルダーは、作業や課題を公開する。
- スクラムチームのメンバーは、お互いに能力のある独立した個人として尊敬し、一緒に動く人たちからも同じように尊敬される。
- スクラムチームのメンバーは、正しいことをする勇気や困難な問題に取り組む勇気を持つ。

## XP(エクストリーム・プログラミング)

- 特徴
  - 価値、原則、プラクティスに分かれている
  - コミュニケーションだけでなくエンジニアリングのプラクティスが揃っているのでエンジニアが共感しやすい内容

## XPの価値

- コミュニケーション

チームの意識を高め、効率的な協力関係を生み出す

- シンプルさ

さまざまな意思決定に適用できる考え方

- フィードバック

十分な改善を行っていくためのフィードバック

- 勇気

開発の中で求められるもの

- 尊重

上記、4つの価値の背後にあるのが尊重

## XPの原則

人間性、経済性、相互利益、自己相似性、改善、多様性、反省、フロー、機会冗長性、失敗、品質、小さなステップ、責任の受け入れ

## XPのプラクティス

- 全員同席

チームメンバーの座席を集める

- チーム全体

職能横断型チームを作る

- 情報豊富な作業空間

たくさんの情報に囲まれた作業スペースを作る

- 活気ある仕事

残業ベースで働かない

- ペアプログラミング

知識や経験を倍速で積んでいく

- ストーリー

ユーザーの要求を小さくまとめ管理する

- １週間サイクル

短い期間で開発とリリースを繰り返す

- 四半期サイクル

中長期的な計画もできるだけ短く作る

- ゆとり

ゆとりを構築し、正直なコミュニケーションを用いて、コミットメントを促していく

- 10分ビルド

特定の短い時間内にビルドを終わらせる

- 常時結合

継続的インテグレーション(CI)

- テストファーストプログラミング

テストファースト、TDD

- インクリメンタル設計

設計をできるだけ遅らせるために小さく設計していく

- 実顧客の参加

ユーザーを巻き込む

- インクリメンタル配置

継続的デリバリ(CD)

- チームの継続

チームとして成熟度を高めていく

- チームの縮小

意欲ある経験者で別チームを立ち上げる

- 根本原因の分析

表面的な問題にとらわれずに問題を深堀する

- コードの共有

コードを民主化する

- コードとテスト

コードとテストが全て

- 単一のコードベース

管理コスト、マージコストを下げる

- 目次配置

自動デプロイ・リリース

- 協議によるスコープ契約

短い契約期間でスコープを調整

- 利用分払い

利用した分だけ支払ってもらう

## リーンソフトウェア開発

- TPSがUSに行って逆輸入
- 原則と思考ツール(考え方)が中心なので実際に何をすべきかわかりにくい

## リーンソフトウェア開発の7つの原則

- 無駄をなくす
  無駄を取り除いて早く価値提供する

- 品質を作りこむ
  欠陥をあとで見つけようとしない

- 知識を作り出す
  ソフトウェア開発は知識創造プロセス

- 決定を遅らせる
  ギリギリまで待って判断する

- 速く提供する
  速さを武器にする

- 人を尊重する
  ソフトウェア開発は人間中心の活動

- 全体を最適化する
  価値の流れ全体を見ながら改善を行う

## かんばん

- 開発手法としてのかんばんと、ツールのかんばんのダブル構成
- 原則が手順書のようになっているので始めやすい

## かんばんの基本原則

- 現在、何をしているかを理解することから始める
  - ホワイトボードに書き出す
  - かんばんに反映する

- 現状のプロセス、役割、責務、職位を尊重する
- 全ての地位でのリーダーシップを求める

## かんばんのコアプラクティス

- 可視化する
- WIPを制限する
- 流れを管理する
- 明確なポリシーを作る
- フォードバックループを実現する
- コラボレーティブに改善し、実験的に進化する

## DevOps

- 開発と運用の効率的・効果的なコラボレーションをベースとしている
- 最初は開発手法というマインドセットだった

## DevOpsのツール

- コード：GitHubやGitLabなど
- ビルド：JenkinsなどのCIツール
- テスト：自動テスト
- パッケージ：コンテナ技術、ライブラリ管理
- リリース：リリース自動化
- コンフィギュレーション：インフラの自動構築、オーケストレーションツール
- モニター：パフォーマンスモニタリングツール

## DevOpsの目標

- デプロイの頻度
- 変更のリードタイム
- 変更失敗率(変更障害率)
- 平均修復時間

## DORA's State of DevOps

- DORA(DevOps Research and Assessment)

DevOpsの導入状況とその結果を調査している組織

- そのState of DevOpsレポートは毎回さまざまな発見をもたらしている
- レポートは無料でダウンロード可能

## スクラムガイド

- スクラムガイドはわずか18ページのスクラムのガイドライン
- スクラムガイドは、時代に応じて更新されている

## スクラムの概要

複雑な問題に対応する適応型のソリューションを通じて、人々、チーム、組織が価値を生み出すための軽量型のフレームワーク。

## スクラムチーム：プロダクトオーナー

- プロダクトゴールを策定し、明示的に伝える
- プロダクトバックログアイテムを作成し、明確に伝える
- プロダクトバックログアイテムを並び替える
- プロダクトバックログに透明性があり、見える化され、理解されるようにする

## スクラムチーム：開発者

- スプリントバックログ(スプリントの計画)を作成する
- 完成の定義を忠実に守ることにより品質を作りこむ
- スプリントゴールに向けて毎日計画を適応させる
- 専門家としてお互いに責任を持つ

## スクラムチーム：スクラムマスター

- 自己管理型で機能横断型のチームメンバーをコーチする
- スクラムチームが完成の定義を満たす価値の高いインクリメントの作成に集中できるよう支援する
- スクラムチームの進捗を防げる障害物を排除するように働きかける
- 全てのスクラムイベントが開催され、ポジティブで生産的であり、タイムボックスの制限が守られるようにする

## SMはPOを支援する

- 効果的なプロダクトゴールの定義とプロダクトバックログ管理の方法を探すことを支援する
- 明確で簡潔なプロダクトバックログアイテムの必要性についてスクラムチームに理解してもらう
- 複雑な環境での経験的なプロダクト計画の策定を支援する
- 必要に応じてステークホルダーとのコラボレーションを促進する

## SMは組織を支援する

- 組織へのスクラムの導入を指導・トレーニング・コーチする
- 組織においてスクラムの実施方法を計画・助言する
- 複雑な作業に対する経験的アプローチを社員やステークホルダーに理解・実施してもらう
- ステークホルダーとスクラムチームの間の障壁を取り除く

## スクラムマスターの具体的な仕事は？

- チームの成果が最大化できるならなんでもする
- チームがやれることは何もしない
- 距離感が重要

## スクラムマスターと開発者を兼務できるか？

- 兼務は推奨されない
- どうしようもないとき
  - 今の立ち位置を明確にして話す
  - 役割をパスする
  - 自分の発言が与える影響を考慮する

## スクラムを推進する時に注意することは？

- 正しさにこだわらない
  - そもそもスクラムは必ずうまくいく方法ではない
  - 正しさを求めると原理主義に陥って、理解を得られない
  - スクラム導入の目的を忘れないこと

# スクラムイベント:スプリント

- 固定の期間をスプリントと呼ぶ
- スプリントの中でスクラムイベントを行う。スプリントを繰り返ししていく
- 2週間の長さが一般的。はじめてやるならまず1週間を試してみるのがいい。
- スクリントごとにスプリントゴールを立て、スクラムチームはその達成を目指していく

## スクラムイベント:スプリントプランニング

- スプリントの最初に行うイベント
- スプリントプランニングでは、スプリントの計画を立てる
- このMTGの目的は、スプリントで開発するバックログであるスプリントバックログ(スプリントゴールを含む)を決めること
- 目安の時間は、1週間スプリントで2時間ぐらい、2週間スプリントで4時間、1ヵ月スプリントで8時間

## スクラムイベント：スプリントプランニングの手順例

- スプリントゴールを決める
  (例)問題解決、向上、仮設検証
- スプリントバックログを選ぶ
  - POを選んだスプリントバックログの説明を行い、開発者と質疑応答する
  - 明確になったスプリントバックログの見積もりを行い、スコープ(やる量)を決める
- 必要であればスプリントバックログをタスクに分割する

 ## スクラムイベント：デイリースクラム

 - いわゆる朝礼。15分いないに開催するイベント。コミュニケーションの場でもある
 - スプリントゴールの進捗を確認し、計画を再調整する
 - 問題や課題の対策も考え、意思決定する

## スクラムイベント：デイリースクラムの手順例

- 3つの質問スプリントゴールを決める
  - きのうやったこと
  - 今日やること
  - あれば課題や不安

## スクラムイベント：スプリントレビュー

- スクリントの成果を検査し今後の適応を決定する
- 成果のプレゼンテーション + ディスカッションを行う
- 目安の時間は、1週間スプリントで1時間ぐらい、2週間スプリントで2時間、1ヵ月スプリントで4時間

## スクラムイベント：スプリントレトロスペクティブ

- いわゆる振り返り
- 開発全体の検査を行う
- 目安の時間は1週間スプリントで1時間、2週間スプリントで1.5時間、1ヵ月スプリントで3時間

## スクラムイベント：スプリントレトロスペクティブの実施例

- KPTは代表的な手法
  - Keep：よかったこと
  - Good: ありがとうなこと
  - Progrem: いまいちなこと
  - Bad: もっとよくできること
  - Try: チャレンジ

## プロダクトバックログ

- プロダクトレベルのやることリスト
- バックログリファインメントを通して、プロダクトバックログに磨きをかけていく
- プロダクトバックログには長期的な目標であるプロダクトゴールも含まれる

## スクリントバックログ

- スプリントレベルのやることリスト
- プロダクトバックログと比べると解像度は高い
- スプリントバックログにはスプリントゴールが含まれる

## インクリメント

- プロダクトゴールの為の階段
- スプリントレビューで検査される
- インクリメントは完成の定義を満たさなければならない

# 参考書籍

- アジャイルサムライ
- プロダクトマネジメント
- PMP







